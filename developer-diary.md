<!--
 * @Autor: YeWei Wang
 * @Date: 2020-09-15 02:36:45
 * @WeChat: wj826036
 * @Motto: 求知若渴，虚心若愚
 * @Description: 开发者日志
 * @LastEditTime: 2020-09-23 03:16:19
 * @Version: 1.0
 * @FilePath: \YeweiChat-Server-express\developer-diary.md
-->

## 开发者日记 (2020/9/15)

### 连接邮箱 (2020/9/20)

- 连接邮箱
  + 插件： nodemailer
- 获取前端数据
  + 插件：body-oarser
- 发邮件测试

### 数据接口文档 (2020/9/21)

- 注册
  + 输入：用户名，邮箱，密码
  + 输出： success
- 用户名匹配
  + 输入：用户名
  + 输出：是/否
- 邮箱匹配
  + 输入： 邮箱
  + 输出： 是/否
- 登陆
  + 输入：用户名/邮箱、密码
  + 输出： 用户ID、用户头像、用户名
- 好友列表
  + 输入：用户ID
  + 输出： 好友id、好友头像、备注名、好友/群判断
- 最后消息
  + 输入：用户ID、好友ID
  + 输出：内容、时间、属性
- 未读消息数
  + 输入：用户ID、好友ID
  + 输出：消息数
- 群列表
  + 输入：用户ID
  + 输出：群ID\群名、群头像...
- 群最后消息
  + 输入：群ID
  + 输出：内容、时间、属性
- 群未读消息数
  + 输入：群id，用户id
  + 输出：消息数
- 修改消息数
  + 输入：用户ID，好友ID
  + 输出： success
- 好友请求数
  + 输入：用户ID
  + 输出：请求数
- 最后请求时间
  + 输入：用户id
  + 输出：时间
- 好友请求表
  + 输入：用户ID
  + 输出：好友id、好友头像、名字
- 好友请求消息
  + 输入：用户id、请求好友id
  + 输出：内容、时间
- 同意加好友
  + 输入：用户ID、好友ID
  + 输出：success
- 拒绝加好友
  + 输入：用户ID、好友ID
  + 输出：success
- 搜查用户
  + 输入：关键词
  + 输出：用户名、用户ID、用户邮箱、用户头像
- 是否为好友
  + 输入：用户id、被搜索用户ID
  + 输出：是/否
- 搜查群
  + 输入：搜索词
  + 输出：群ID、群名、去把头像
- 是否在群内
  + 输入：用户ID，群id
  + 输出：是/否
- 用户详情：
  + 输入：用户id，关系
  + 输出：用户名，昵称，邮箱，简介...
- 好友请求
  + 输入：用户ID，被请求用户id，请求词
  + 输出：success
- 更新资料
  + 输入：用户id、修改内容、修改项
  + 输出：success
- 更新密码
  + 输入：用户id、原密码、现密码
  + 输出：success
- 修改昵称
  + 输入：用户id、好友id、昵称
  + 输出：success
- 好友聊天
  + 输入：用户id，好友id，页码
  + 输出：内容、属性、时间、用户头像、用户id
- 好友聊天即时消息
  + 输入：用户id、内容、属性、用户头像
  + 输出：success
  + 即时输出：用户id、内容、属性、用户头像
- 群消息
  + 输入：群id、页码
  + 输出：内容、发送者id、时间、类型、头像
- 群即时消息
  + 输入：群id、用户id、内容、属性、用户头像
  + 输出：success
  + 即时输出： 用户id、群id、内容、属性、用户头像
- 建群
  + 输入：用户id、群名、群头像、群成员id(数组)
  + 输出：success
- 群消息
  + 输入：群id
  + 输出：-
- 群成员
  + 输入：群id
  + 输出：用户id，用户名，头像
- 更新群资料
  + 输入：群id、修改项、修改内容
  + 输出：success
- 添加群成员
  + 输入：群id，成员id
  + 输出： success
- 删除群成员
  + 输入：群id，成员id
  + 输出： success
- 用户是否在群内
  + 输入：群id，成员id
  + 输出：是/否
- 删除群
  + 输入：群id
  + 输出：success

### 注册页面前后端 (2020/9/21)

- 密码加密Bcryptjs
- 前后端接口文档

### 登陆页面后端 (2020/9/21)

- 前后端通讯验证：token
  + 基于token的验证过程如下
    1. 登陆时，可宋端发送用户名密码
    2. 服务端验证用户名密码是否正确，校验通过就会生成一个有效的token串，发送给客户端
    3. 客户端存储token，一般都会存在localStorage或者cookie里面
    4. 客户端请求时都带有token，可以将其放在请求头里，每次请求都携带token
    5. 服务端验证token，所有需要校验身份的接口都会被校验token，若token解析后的数据包含用户身份信息，则身份验证通过返回数据
- 插件：jsonwebtoken

### 搜索页面 (2020/9/22)

- 搜索页面

- token判断

### 好友详情 (2020/9/22)

- 用户信息修改
- 好友昵称修改
- 带密码项修改 (2020/9/23)

### 好友申请 (2020/9/23)
- 拒绝好友 / 删除好友
- 同意好友